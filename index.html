<!doctype html>
<html>
    <head>
        <meta charset="utf-8"/>
        <script type="text/javascript" src="static/js/brython.js"></script>
        <script type="text/javascript" src="static/js/brython_stdlib.js"></script>
        <script src="https://cdn.jsdelivr.net/pyodide/v0.25.1/full/pyodide.js"></script>        
        <script type="text/python" src="static/brython/drawFunctions.py" id="drawFunctions"></script>
        <script type="text/python" src="static/python/geometryObjects.py" id="geometryObjects"></script>
        <script type="text/python" src="static/python/abstractShape.py" id="abstractShape"></script>   
        <script type="text/python" src="static/python/pin.py" id="pin"></script>     
        <script type="text/python" src="static/python/component.py" id="component"></script>
        <script type="text/python" src="static/python/board.py" id="board"></script>
        <script type="text/python" src="static/python/camcadLoader.py" id="camcadLoader"></script>
        <script type="text/python" src="static/python/gencadLoader.py" id="gencadLoader"></script>
        <script type="text/python" src="static/python/unlzw3.py" id="unlzw3"></script>
        <script type="text/python" src="static/python/odbPlusPlusLoader.py" id="odbPlusPlusLoader"></script>
        <script type="text/python" src="static/python/loaderSelectorFactory.py" id="loaderSelectorFactory"></script>
    </head>

    <body onload="brython(1)">
        <canvas id="myCanvas" width="1200" height="700" style="border:1px solid #000000;"></canvas>
        <div id="fileContent"></div>
        <script type="text/python" id="drawTest">
            from browser import document
            import drawFunctions
            import geometryObjects as gobj

            def scalePointList(pointList, coefficient):
                for point in pointList:
                    point.scaleInPlace(coefficient)
            
            def movePointListByVector(pointList, moveVector):
                for point in pointList:
                    point.translateInPlace(moveVector)
            
            def generatePointXYList(pointList):
                result = []
                for point in pointList:
                    result.append(point.getXY())
                return result

            canvas = document['myCanvas']
            context = canvas.getContext('2d')
            
            ## component base data
            componentCoords = gobj.Point(1.578, -1.249)
            componentShapePointsList = [gobj.Point(1.590, -1.298), gobj.Point(1.590, -1.238), gobj.Point(1.566, -1.238), gobj.Point(1.566, -1.298)]
            pin1ShapePointsList = [gobj.Point(1.568, -1.258), gobj.Point(1.588, -1.258), gobj.Point(1.588, -1.240), gobj.Point(1.568, -1.240)]
            pin2ShapePointsList = [gobj.Point(1.568, -1.296), gobj.Point(1.588, -1.296), gobj.Point(1.588, -1.278), gobj.Point(1.568, -1.278)]

            customScale = 4000
            componentCoords.scaleInPlace(customScale)
            xComp, yComp = componentCoords.getXY()
            scalePointList(componentShapePointsList, customScale)
            scalePointList(pin1ShapePointsList, customScale)
            scalePointList(pin2ShapePointsList, customScale)

            moveVector = [1200//2 - xComp, 700//2 - yComp]
            movePointListByVector(componentShapePointsList, moveVector)
            movePointListByVector(pin1ShapePointsList, moveVector)
            movePointListByVector(pin2ShapePointsList, moveVector)
            
            print(xComp, yComp)
            print(componentShapePointsList, pin1ShapePointsList, pin2ShapePointsList)

            drawFunctions.drawPolygon(context, generatePointXYList(componentShapePointsList), 'green', 2, False)
            drawFunctions.drawPolygon(context, generatePointXYList(pin1ShapePointsList), 'red', 2, False)
            drawFunctions.drawPolygon(context, generatePointXYList(pin2ShapePointsList), 'black', 2, False)
        </script>
    </body>
</html>