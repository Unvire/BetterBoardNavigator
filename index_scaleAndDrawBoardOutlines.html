<!doctype html>
<html>
    <head>
        <meta charset="utf-8"/>
        <script type="text/javascript" src="static/js/brython.js"></script>
        <script type="text/javascript" src="static/js/brython_stdlib.js"></script>
        <script src="https://cdn.jsdelivr.net/pyodide/v0.25.1/full/pyodide.js"></script>        
        <script type="text/python" src="static/brython/drawFunctions.py" id="drawFunctions"></script>
        <script type="text/python" src="static/python/geometryObjects.py" id="geometryObjects"></script>
        <script type="text/python" src="static/python/abstractShape.py" id="abstractShape"></script>   
        <script type="text/python" src="static/python/pin.py" id="pin"></script>     
        <script type="text/python" src="static/python/component.py" id="component"></script>
        <script type="text/python" src="static/python/board.py" id="board"></script>
        <script type="text/python" src="static/python/camcadLoader.py" id="camcadLoader"></script>
        <script type="text/python" src="static/python/gencadLoader.py" id="gencadLoader"></script>
        <script type="text/python" src="static/python/unlzw3.py" id="unlzw3"></script>
        <script type="text/python" src="static/python/odbPlusPlusLoader.py" id="odbPlusPlusLoader"></script>
        <script type="text/python" src="static/python/loaderSelectorFactory.py" id="loaderSelectorFactory"></script>
    </head>

    <body onload="brython(1)">
        <canvas id="myCanvas" width="1200" height="700" style="border:1px solid #000000;"></canvas>
        <div id="fileContent"></div>
        <script type="text/python" id="drawTest">
            from browser import document
            import drawFunctions
            import geometryObjects as gobj

            def scalePointList(pointList, coefficient):
                for point in pointList:
                    point.scaleInPlace(coefficient)
            
            def movePointListByVector(pointList, moveVector):
                for point in pointList:
                    point.translateInPlace(moveVector)
            
            def generatePointXYList(pointList):
                result = []
                for point in pointList:
                    result.append(point.getXY())
                return result

            canvas = document['myCanvas']
            context = canvas.getContext('2d')
            
            ## component base data
            areaCenterCoords = gobj.Point(1.888,-1.776)
            outlinePointsList = [gobj.Point(0.000, -3.551), gobj.Point(0.000, 0.000), gobj.Point(0.000, 0.000), gobj.Point(3.776, 0.000), 
                                 gobj.Point(3.776, 0.000), gobj.Point(3.776, -3.551), gobj.Point(3.776, -3.551), gobj.Point(0.000, -3.551)]
            

            customScale = 100
            areaCenterCoords.scaleInPlace(customScale)
            xCenter, yCenter = areaCenterCoords.getXY()
            scalePointList(outlinePointsList, customScale)

            moveVector = [1200//2 - xCenter, 700//2 - yCenter]
            movePointListByVector(outlinePointsList, moveVector)
            
            print(xCenter, yCenter)
            print(outlinePointsList)

            linesList = []
            while outlinePointsList:
                point1 = outlinePointsList.pop(0)
                point2 = outlinePointsList.pop(0)
                linesList.append(gobj.Line(point1, point2))
            
            for line in linesList:
                x0, y0, x1, y1 = line.getPointsAsXYTuple() 
                drawFunctions.drawLine(context, (x0, y0), (x1, y1), 'green', 2)
        </script>
    </body>
</html>