<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pyodide Load Schematic File</title>
    <script src="https://cdn.jsdelivr.net/pyodide/v0.26.0/full/pyodide.js"></script>
    <script type="text/javascript" src="/static/js/configurePythonFunctions.js"></script>
    <script type="text/javascript" src="/static/js/fileFunctions.js"></script>
</head>
<body>
    <input type="file" id="fileInput" disabled="true"/>
    <script>
        var pyodide;
        var loadedFileName = "";

        document.addEventListener("DOMContentLoaded", async () => {
            pyodide = await loadPyodide();
            await configurePythonPath(pyodide);
            await loadPygame(pyodide);
            await loadLocalModules(pyodide);
            document.getElementById("fileInput").disabled = false;
        });

        // open file and save it to pyodide.FS
        fileInput.addEventListener("change", async (event) => {
            const file = event.target.files[0];
            if (file) {
                await removePreviousFileFromFS(pyodide, loadedFileName);
                await openAndLoadCadFile(pyodide, file);
                loadedFileName = file.name;
            }
        });

    </script>
</body>
</html>